{
	"id": "com.xiaomi-miio",
	"name": {
		"en": "Xiaomi Mi Home",
		"nl": "Xiaomi Mi Home"
    },
	"version": "2.0.0",
	"compatibility": "0.x || 1.x",
	"author": {
		"name": "Jelger Haanstra",
		"email": "homey@solidewebservices.com"
	},
    "images": {
        "large": "./assets/images/large.jpg",
        "small": "./assets/images/small.jpg"
    },
	"category": "appliances",
	"description": {
		"en": "Control Xiaomi Mi Home devices",
		"nl": "Bestuur Xiaomi Mi Home apparaten"
	},
	"dependencies": {
		"net": "*"
	},
    "capabilities": {
        "measure_aqi": {
            "type": "number",
            "title": {
                "en": "Air Quality Index",
                "nl": "Luchtkwaliteitsindex"
            },
            "getable": true,
            "setable": false,
            "units": {
                "en": "aqi",
                "nl": "aqi"
            },
            "min": 0,
            "max": 500
        }
    },
	"drivers": [
        {
			"id": "yeelight-bulb-color",
			"name": {
				"en": "Yeelight Bulb Color",
				"nl": "Yeelight Bulb Kleur"
			},
			"images": {
				"large": "drivers/yeelight-bulb-color/assets/images/large.jpg",
				"small": "drivers/yeelight-bulb-color/assets/images/small.jpg"
			},
			"class": "light",
            "capabilities": [
                "onoff",
                "dim",
                "light_hue",
                "light_saturation",
                "light_temperature",
                "light_mode"
            ],
			"pair": [
				{
					"id": "start"
				}
			],
			"settings": [
			    {
                    "type": "group",
                    "label": {
                        "en": "Yeelight Bulb Color Settings",
						"nl": "Yeelight Bulb Kleur Instellingen"
                    },
					"children": [
				        {
				            "id": "address",
				            "type": "text",
				            "value": "0.0.0.0",
				            "label": {
				                "en": "IP Address",
				                "nl": "IP Adres"
				            }
				        },
				        {
					        "id": "token",
					        "type": "text",
					        "value": "",
					        "label": {
						        "en": "Yeelight Bulb Color Token",
						        "nl": "Yeelight Bulb Kleur Token"
					        }
				        }
		            ]
		        }
		    ]
		},
        {
			"id": "yeelight-bulb-white",
			"name": {
				"en": "Yeelight Bulb White",
				"nl": "Yeelight Bulb Wit"
			},
			"images": {
				"large": "drivers/yeelight-bulb-white/assets/images/large.jpg",
				"small": "drivers/yeelight-bulb-white/assets/images/small.jpg"
			},
			"class": "light",
            "capabilities": [
                "onoff",
                "dim",
                "light_temperature"
            ],
			"pair": [
				{
					"id": "start"
				}
			],
			"settings": [
			    {
                    "type": "group",
                    "label": {
                        "en": "Yeelight Bulb White Settings",
						"nl": "Yeelight Bulb Wit Instellingen"
                    },
					"children": [
				        {
				            "id": "address",
				            "type": "text",
				            "value": "0.0.0.0",
				            "label": {
				                "en": "IP Address",
				                "nl": "IP Adres"
				            }
				        },
				        {
					        "id": "token",
					        "type": "text",
					        "value": "",
					        "label": {
						        "en": "Yeelight Bulb White Token",
						        "nl": "Yeelight Bulb Wit Token"
					        }
				        }
		            ]
		        }
		    ]
		},
		{
			"id": "mi-robot",
			"name": {
				"en": "Mi Robot Vacuum Cleaner",
				"nl": "Mi Robot Stofzuiger"
			},
			"images": {
				"large": "drivers/mi-robot/assets/images/large.jpg",
				"small": "drivers/mi-robot/assets/images/small.jpg"
			},
			"class": "vacuumcleaner",
			"capabilities": [
                "vacuumcleaner_state",
                "measure_battery"
            ],
            "mobile": {
                "components": [
                    {
                        "id": "battery",
                        "capabilities": [
                            "measure_battery"
                        ]
                    },
                    {
                        "id": "icon",
                        "capabilities": []
                    },
                    {
                        "id": "picker",
                        "capabilities": [
                            "vacuumcleaner_state"
                        ]
                    }
                ]
            },
			"pair": [
				{
					"id": "start"
				}
			],
			"settings": [
			    {
                    "type": "group",
                    "label": {
                        "en": "Mi Robot Settings",
						"nl": "Mi Robot Instellingen"
                    },
					"children": [
				        {
				            "id": "address",
				            "type": "text",
				            "value": "0.0.0.0",
				            "label": {
				                "en": "IP Address",
				                "nl": "IP Adres"
				            }
				        },
				        {
					        "id": "token",
					        "type": "text",
					        "value": "",
					        "label": {
						        "en": "Mi Robot Token",
						        "nl": "Mi Robot Token"
					        }
				        }
		            ]
		        }
		    ]
		},
        {
			"id": "mi-airpurifier",
			"name": {
				"en": "Mi Air Purifier",
				"nl": "Mi Luchtreiniger"
			},
			"images": {
				"large": "drivers/mi-airpurifier/assets/images/large.jpg",
				"small": "drivers/mi-airpurifier/assets/images/small.jpg"
			},
			"class": "sensor",
			"capabilities": [
                "onoff",
                "measure_temperature",
                "measure_humidity",
                "measure_aqi"
            ],
            "mobile": {
                "components": [
                    {
                        "id": "icon",
                        "capabilities": [
                            "onoff"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_temperature"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_humidity"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_aqi"
                        ],
                        "options": {
                            "icons": {
                                "Air Quality Index": "/drivers/mi-airpurifier/assets/images/aqi.svg"
                            }
                        }
                    }
                ]
            },
			"pair": [
				{
					"id": "start"
				}
			],
			"settings": [
			    {
                    "type": "group",
                    "label": {
                        "en": "Mi Air Purifier Settings",
						"nl": "Mi Luchtreiniger Instellingen"
                    },
					"children": [
				        {
				            "id": "address",
				            "type": "text",
				            "value": "0.0.0.0",
				            "label": {
				                "en": "IP Address",
				                "nl": "IP Adres"
				            }
				        },
				        {
					        "id": "token",
					        "type": "text",
					        "value": "",
					        "label": {
						        "en": "Mi Air Purifier Token",
						        "nl": "Mi Luchtreiniger Token"
					        }
				        }
		            ]
		        }
		    ]
		},
        {
			"id": "mi-humidifier",
			"name": {
				"en": "Mi Humidifier",
				"nl": "Mi Luchtbevochtiger"
			},
			"images": {
				"large": "drivers/mi-humidifier/assets/images/large.jpg",
				"small": "drivers/mi-humidifier/assets/images/small.jpg"
			},
			"class": "other",
            "capabilities": [
                "onoff",
                "measure_temperature",
                "measure_humidity"
            ],
            "mobile": {
                "components": [
                    {
                        "id": "icon",
                        "capabilities": [
                            "onoff"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_temperature"
                        ]
                    },
                    {
                        "id": "sensor",
                        "capabilities": [
                            "measure_humidity"
                        ]
                    }
                ]
            },
			"pair": [
				{
					"id": "start"
				}
			],
			"settings": [
			    {
                    "type": "group",
                    "label": {
                        "en": "Mi Humidifier Settings",
						"nl": "Mi Luchtbevochtiger Instellingen"
                    },
					"children": [
				        {
				            "id": "address",
				            "type": "text",
				            "value": "0.0.0.0",
				            "label": {
				                "en": "IP Address",
				                "nl": "IP Adres"
				            }
				        },
				        {
					        "id": "token",
					        "type": "text",
					        "value": "",
					        "label": {
						        "en": "Mi Humidifier Token",
						        "nl": "Mi Luchtbevochtiger Token"
					        }
				        }
		            ]
		        }
		    ]
		}
	],
	"flow": {
        "conditions": [
			{
				"id": "cleaningVacuum",
				"title": {
                    "en": "!{{is|is not}} cleaning",
                    "nl": "!{{is|is niet}} aan het stofzuigen"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "chargingVacuum",
				"title": {
                    "en": "!{{is|is not}} charging",
                    "nl": "!{{is|is niet}} aan het opladen"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "returningVacuum",
				"title": {
                    "en": "!{{is|is not}} returning to dock",
                    "nl": "!{{is|is niet}} aan het terugkeren naar de dock"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "pausedVacuum",
				"title": {
                    "en": "!{{is|is not}} paused",
                    "nl": "!{{is|is niet}} gepauzeerd"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "poweredAirpurifier",
				"title": {
                    "en": "!{{is|is not}} powered on",
                    "nl": "!{{is|is niet}} aangezet"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Air Purifier",
							"nl": "Selecteer Mi Luchtreiniger"
						},
						"filter": "driver_id=mi-airpurifier"
					}
				]
			},
            {
				"id": "poweredHumidifier",
				"title": {
                    "en": "!{{is|is not}} powered on",
                    "nl": "!{{is|is niet}} aangezet"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Humidifier",
							"nl": "Selecteer Mi Luchtbevochtiger"
						},
						"filter": "driver_id=mi-humidifier"
					}
				]
			}
        ],
		"actions": [
			{
				"id": "startVacuum",
				"title": {
					"en": "Start vacuum cleaning",
					"nl": "Start stofzuigen"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
						"placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
			{
				"id": "pauseVacuum",
				"title": {
					"en": "Pause vacuum cleaning",
					"nl": "Pauzeer stofzuigen"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "stopVacuum",
				"title": {
					"en": "Stop vacuum cleaning without docking",
					"nl": "Stop stofzuigen zonder naar de dock te gaan"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
			{
				"id": "chargeVacuum",
				"title": {
					"en": "Stop cleaning and go to dock",
					"nl": "Stop stofzuigen en naar dock"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "spotCleanVacuum",
				"title": {
					"en": "Start spot vacuum cleaning",
					"nl": "Start spot stofzuigen"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "findVacuum",
				"title": {
					"en": "Find vacuum cleaner",
					"nl": "Vind stofzuiger"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
					}
				]
			},
            {
				"id": "fanPowerVacuum",
				"title": {
					"en": "Set Fan Power",
					"nl": "Stel ventilator kracht in"
				},
				"args": [
                    {
						"name": "fanspeed",
						"type": "dropdown",
                        "values": [
                            {
                                "id": "quiet",
                                "label": {
                                    "en": "Quiet",
                                    "nl": "Stil"
                                }
                            },
                            {
                                "id": "balanced",
                                "label": {
                                    "en": "Balanced",
                                    "nl": "Gebalanceerd"
                                }
                            },
                            {
                                "id": "turbo",
                                "label": {
                                    "en": "Turbo",
                                    "nl": "Turbo"
                                }
                            },
                            {
                                "id": "full",
                                "label": {
                                    "en": "Full Speed",
                                    "nl": "Maximum"
                                }
                            }
                        ]
                    },
                    {
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Robot",
							"nl": "Selecteer Mi Robot"
						},
						"filter": "driver_id=mi-robot"
                    }
				]
			},
            {
				"id": "airpurifierOn",
				"title": {
					"en": "Turn on",
					"nl": "Zet aan"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Air Purifier",
							"nl": "Selecteer Mi Luchtreiniger"
						},
						"filter": "driver_id=mi-airpurifier"
					}
				]
			},
            {
				"id": "airpurifierOff",
				"title": {
					"en": "Turn off",
					"nl": "Zet uit"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Air Purifier",
							"nl": "Selecteer Mi Luchtreiniger"
						},
						"filter": "driver_id=mi-airpurifier"
					}
				]
			},
            {
				"id": "modeAirpurifier",
				"title": {
					"en": "Set Speed",
					"nl": "Stel snelheid in"
				},
				"args": [
                    {
						"name": "mode",
						"type": "dropdown",
                        "values": [
                            {
                                "id": "idle",
                                "label": {
                                    "en": "Idle",
                                    "nl": "Standby"
                                }
                            },
                            {
                                "id": "auto",
                                "label": {
                                    "en": "Auto",
                                    "nl": "Auto"
                                }
                            },
                            {
                                "id": "silent",
                                "label": {
                                    "en": "Silent",
                                    "nl": "Stil"
                                }
                            },
                            {
                                "id": "low",
                                "label": {
                                    "en": "Low",
                                    "nl": "Laag"
                                }
                            },
                            {
                                "id": "medium",
                                "label": {
                                    "en": "Medium",
                                    "nl": "Middel"
                                }
                            },
                            {
                                "id": "high",
                                "label": {
                                    "en": "High",
                                    "nl": "Hoog"
                                }
                            }
                        ]
                    },
                    {
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Air Purifier",
							"nl": "Selecteer Mi Luchtreiniger"
						},
						"filter": "driver_id=mi-airpurifier"
                    }
				]
			},
            {
				"id": "humidifierOn",
				"title": {
					"en": "Turn on",
					"nl": "Zet aan"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Humidifier",
							"nl": "Selecteer Mi Luchtbevochtiger"
						},
						"filter": "driver_id=mi-humidifier"
					}
				]
			},
            {
				"id": "humidifierOff",
				"title": {
					"en": "Turn off",
					"nl": "Zet uit"
				},
				"args": [
					{
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Humidifier",
							"nl": "Selecteer Mi Luchtbevochtiger"
						},
						"filter": "driver_id=mi-humidifier"
					}
				]
			},
            {
				"id": "modeHumidifier",
				"title": {
					"en": "Set Speed",
					"nl": "Stel snelheid in"
				},
				"args": [
                    {
						"name": "mode",
						"type": "dropdown",
                        "values": [
                            {
                                "id": "silent",
                                "label": {
                                    "en": "Silent",
                                    "nl": "Stil"
                                }
                            },
                            {
                                "id": "medium",
                                "label": {
                                    "en": "Medium",
                                    "nl": "Middel"
                                }
                            },
                            {
                                "id": "high",
                                "label": {
                                    "en": "High",
                                    "nl": "Hoog"
                                }
                            }
                        ]
                    },
                    {
						"name": "device",
						"type": "device",
                        "placeholder": {
							"en": "Select Mi Humidifier",
							"nl": "Selecteer Mi Luchtbevochtiger"
						},
						"filter": "driver_id=mi-humidifier"
                    }
				]
			}
		]
	}
}
